<div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold">Gesti√≥n de Empleados</h2>
    <div class="dropdown dropdown-end">
        <label tabindex="0" class="btn btn-outline btn-primary">
            Opciones
            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
            </svg>
        </label>
        <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
            <li><a>Registrar nuevo empleado</a></li>
            <li><a (click)="openModal()">Pagar planilla</a></li>
        </ul>
    </div>
</div>

<div class="card bg-base-100 shadow">
    <div class="card-body">
        <h3 class="card-title mb-4">Lista de Empleados</h3>
        <div class="overflow-x-auto">
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Salario semanal</th>
                        <th>CUI</th>
                        <th>Email</th>
                        <th>Puesto</th>
                        <th>√Årea de Trabajo</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @for (employee of employees(); track employee.id) {
                    <tr>
                        <td>{{ employee.fullName }}</td>
                        <td>{{ employee.salary | currency:'GTQ':'symbol':'1.2-2' }}</td>
                        <td>{{ employee.cui }}</td>
                        <td>{{ employee.email }}</td>
                        <td>{{ employee.jobPosition }}</td>
                        <td>
                            <span class="badge "
                                [ngClass]="employee.jobArea === 'HOTEL' ? 'badge-primary' : 'badge-info'">
                                {{ employee.jobArea }}
                            </span>
                        </td>
                        <td class="text-right">
                            <button class="btn btn-sm btn-outline btn-primary">Editar</button>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- modal para pago de planilla -->
<dialog #modalPayEmployees class="modal">
    <div class="modal-box max-w-md">
        <h3 class="font-bold text-xl mb-6 text-center text-primary">
            Pago Semanal de Planilla
        </h3>

        <div method="dialog" class="grid gap-5">
            <!-- Fecha inicio -->
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium">Fecha de inicio</span>
                </label>
                <input type="date"
                    class="input input-bordered w-full focus:ring-2 focus:ring-primary focus:outline-none" required
                    [(ngModel)]="startDate" />
            </div>

            <!-- Fecha final -->
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium">Fecha final</span>
                </label>
                <input type="date"
                    class="input input-bordered w-full focus:ring-2 focus:ring-primary focus:outline-none" required
                    [(ngModel)]="endDate" />
            </div>

            <p class="text-sm pt-3">El pago se realizara a todos los trabajadores tomando en cuenta su salario samala
                base.</p>


            <!-- Botones -->
            <div class="modal-action flex justify-end gap-3 mt-6">
                <button class="btn btn-primary px-6 rounded-xl shadow-md hover:scale-105 transition-transform"
                    type="submit" (click)="savePayroll()">
                    üí≥ Realizar Pago
                </button>
                <button class="btn btn-outline px-6 rounded-xl hover:bg-gray-100" type="button"
                    (click)="modalPayEmployees.close()">
                    ‚úñ Cancelar
                </button>
            </div>
        </div>
    </div>
</dialog>